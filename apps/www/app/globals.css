@import "tailwindcss";
@config "../tailwind.config.ts";

@layer base {
  :root {
    /* ── Base system tokens ─────────────────────────────── */
    --background: 0 0% 98%;
    --foreground: 0 0% 6%;
    --muted: 0 0% 93%;
    --muted-foreground: 0 0% 40%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 6%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 6%;
    --border: 0 0% 88%;
    --input: 0 0% 88%;
    --primary: 0 0% 6%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 93%;
    --secondary-foreground: 0 0% 6%;
    --accent: 0 0% 93%;
    --accent-foreground: 0 0% 6%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --ring: 0 0% 6%;
    --radius: 0rem;

    /* ── Landing section tokens — LIGHT MODE ────────────── */
    --l-bg:          0 0% 98%;      /* page base */
    --l-bg-alt:      0 0% 95%;      /* subtle alternate bg */
    --l-bg-card:     0 0% 100%;     /* card/panel bg */
    --l-bg-card-alt: 0 0% 96%;      /* second card style */
    --l-text:        0 0% 6%;       /* primary text */
    --l-text-muted:  0 0% 38%;      /* secondary text */
    --l-text-faint:  0 0% 60%;      /* purely decorative */
    --l-border:      0 0% 84%;      /* section/card borders */
    --l-border-sub:  0 0% 90%;      /* subtle inner borders */

    /* Accent — acid green adapted for legibility on light */
    --acid: 80 100% 50%;            /* preserved for metrics bg */
    --acid-label: 90 65% 28%;       /* dark olive-green for labels on light */
    --acid-pill: 80 100% 50%;       /* neon pill bg (only in hero/dark) */
    --phosphor: 154 80% 35%;
    --void: 0 0% 4%;

    /* Hero tokens — LIGHT */
    --hero-bg: 0 0% 96%;
    --hero-text: 0 0% 6%;
    --hero-text-sub: 0 0% 30%;
    --hero-text-faint: 0 0% 50%;
    --hero-accent: 90 65% 28%;
    --hero-accent-glow: 80 100% 50%;
    --hero-grid: rgba(0,0,0,0.06);
    --hero-particle: 90 65% 28%;
    --hero-corner: 90 65% 28%;
    --hero-cta-bg: 0 0% 6%;
    --hero-cta-text: 0 0% 98%;
    --hero-outline-border: 0 0% 30%;
    --hero-scan: rgba(0,0,0,0.03);

    /* Metrics tokens — LIGHT */
    --m-bg: 80 45% 92%;
    --m-text: 80 30% 12%;
    --m-text-muted: 80 20% 30%;
    --m-text-faint: 80 15% 42%;
    --m-border: 80 30% 78%;
    --m-accent: 80 50% 22%;
    --m-terminal-bg: 80 30% 86%;

    --grid-color: rgba(0,0,0,0.055);
    --grid-size: 40px;
  }

  .dark {
    --background: 0 0% 5%;
    --foreground: 0 0% 96%;
    --muted: 0 0% 11%;
    --muted-foreground: 0 0% 58%;
    --popover: 0 0% 5%;
    --popover-foreground: 0 0% 96%;
    --card: 0 0% 8%;
    --card-foreground: 0 0% 96%;
    --border: 0 0% 15%;
    --input: 0 0% 15%;
    --primary: 0 0% 96%;
    --primary-foreground: 0 0% 6%;
    --secondary: 0 0% 11%;
    --secondary-foreground: 0 0% 96%;
    --accent: 0 0% 11%;
    --accent-foreground: 0 0% 96%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --ring: 0 0% 84%;

    /* ── Landing section tokens — DARK MODE ─────────────── */
    --l-bg:          0 0% 5%;
    --l-bg-alt:      0 0% 7%;
    --l-bg-card:     0 0% 9%;
    --l-bg-card-alt: 0 0% 11%;
    --l-text:        0 0% 96%;
    --l-text-muted:  0 0% 55%;
    --l-text-faint:  0 0% 30%;
    --l-border:      0 0% 15%;
    --l-border-sub:  0 0% 12%;

    /* Accent — bright neon for dark bg */
    --acid-label: 80 100% 62%;      /* bright acid for dark labels */

    /* Hero tokens — DARK */
    --hero-bg: 0 0% 4%;
    --hero-text: 0 0% 100%;
    --hero-text-sub: 0 0% 75%;
    --hero-text-faint: 0 0% 45%;
    --hero-accent: 80 100% 62%;
    --hero-accent-glow: 80 100% 50%;
    --hero-grid: rgba(128,255,0,0.055);
    --hero-particle: 80 100% 50%;
    --hero-corner: 80 100% 50%;
    --hero-cta-bg: 80 100% 52%;
    --hero-cta-text: 0 0% 0%;
    --hero-outline-border: 0 0% 100%;
    --hero-scan: rgba(128,255,0,0.035);

    /* Metrics tokens — DARK */
    --m-bg: 80 20% 7%;
    --m-text: 80 60% 85%;
    --m-text-muted: 80 30% 55%;
    --m-text-faint: 80 20% 40%;
    --m-border: 80 30% 18%;
    --m-accent: 80 100% 55%;
    --m-terminal-bg: 80 15% 10%;

    --grid-color: rgba(255,255,255,0.04);
  }
}

@layer base {
  * { border-color: hsl(var(--border)); }
  html { scroll-behavior: smooth; }
  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-family: 'IBM Plex Mono', 'Courier New', monospace;
  }
}

/* ─── BACKGROUND UTILITIES ─────────────────────────────── */

.bg-grid {
  background-image:
    linear-gradient(var(--grid-color) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
  background-size: var(--grid-size) var(--grid-size);
}

/* ─── TYPOGRAPHY CLASSES ─────────────────────────────────── */

/* Bebas Neue — display headlines */
.font-display {
  font-family: 'Bebas Neue', 'Impact', sans-serif;
  letter-spacing: 0.01em;
}

/* IBM Plex Mono — UI, labels, body copy */
.font-ibm {
  font-family: 'IBM Plex Mono', 'Courier New', monospace;
}

/* Landing token helpers */
.text-l-primary   { color: hsl(var(--l-text)); }
.text-l-muted     { color: hsl(var(--l-text-muted)); }
.text-l-faint     { color: hsl(var(--l-text-faint)); }
.text-acid-label  { color: hsl(var(--acid-label)); }
.bg-l-bg          { background-color: hsl(var(--l-bg)); }
.bg-l-bg-alt      { background-color: hsl(var(--l-bg-alt)); }
.bg-l-card        { background-color: hsl(var(--l-bg-card)); }
.bg-l-card-alt    { background-color: hsl(var(--l-bg-card-alt)); }
.border-l         { border-color: hsl(var(--l-border)); }
.border-l-sub     { border-color: hsl(var(--l-border-sub)); }

/* ─── SCAN LINES ──────────────────────────────────────────── */

.scanlines::after {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg, transparent, transparent 2px,
    rgba(0,0,0,0.025) 2px, rgba(0,0,0,0.025) 4px
  );
  pointer-events: none;
  z-index: 1;
}
.dark .scanlines::after {
  background: repeating-linear-gradient(
    0deg, transparent, transparent 2px,
    rgba(255,255,255,0.012) 2px, rgba(255,255,255,0.012) 4px
  );
}

/* ─── ANIMATIONS ──────────────────────────────────────────── */

@keyframes glitch-1 {
  0%,100%  { clip-path:inset(0 0 100% 0); transform:translate(0); }
  10%      { clip-path:inset(10% 0 80% 0); transform:translate(-4px,0); }
  20%      { clip-path:inset(30% 0 50% 0); transform:translate(4px,0); }
  30%      { clip-path:inset(60% 0 30% 0); transform:translate(-2px,0); }
  40%      { clip-path:inset(80% 0 10% 0); transform:translate(2px,0); }
  50%      { clip-path:inset(0 0 100% 0);  transform:translate(0); }
}
@keyframes glitch-2 {
  0%,100%  { clip-path:inset(0 0 100% 0); transform:translate(0); }
  10%      { clip-path:inset(20% 0 60% 0); transform:translate(4px,0); }
  20%      { clip-path:inset(5% 0 85% 0);  transform:translate(-4px,0); }
  30%      { clip-path:inset(70% 0 15% 0); transform:translate(3px,0); }
  40%      { clip-path:inset(40% 0 45% 0); transform:translate(-3px,0); }
  50%      { clip-path:inset(0 0 100% 0);  transform:translate(0); }
}
@keyframes float-geo {
  0%,100% { transform:translateY(0) rotate(0deg); }
  50%     { transform:translateY(-16px) rotate(3deg); }
}
@keyframes terminal-blink {
  0%,50% { opacity:1; } 51%,100% { opacity:0; }
}
@keyframes reveal-up {
  from { opacity:0; transform:translateY(40px); }
  to   { opacity:1; transform:translateY(0); }
}
@keyframes counter-in {
  from { opacity:0; transform:scale(0.85) translateY(20px); }
  to   { opacity:1; transform:scale(1) translateY(0); }
}
@keyframes pulse-glow {
  0%,100% { box-shadow:0 0 8px hsl(80 100% 50% / 0.3); }
  50%     { box-shadow:0 0 28px hsl(80 100% 50% / 0.7), 0 0 56px hsl(80 100% 50% / 0.25); }
}
@keyframes scan-line {
  from { top:-4px; opacity:0; }
  5%   { opacity:0.5; }
  95%  { opacity:0.5; }
  to   { top:100%; opacity:0; }
}

.animate-glitch-1    { animation: glitch-1 8s infinite; }
.animate-glitch-2    { animation: glitch-2 8s infinite; }
.animate-float-geo   { animation: float-geo 6s ease-in-out infinite; }
.animate-terminal-blink { animation: terminal-blink 1.2s step-end infinite; }
.animate-reveal-up   { animation: reveal-up 0.8s cubic-bezier(0.22,1,0.36,1) forwards; }
.animate-counter-in  { animation: counter-in 0.6s cubic-bezier(0.22,1,0.36,1) forwards; }
.animate-pulse-glow  { animation: pulse-glow 2.5s ease-in-out infinite; }

/* ─── DOCS CONTENT (unchanged) ──────────────────────────── */

article :is(h2, h3) { scroll-margin-top: 5rem; }

pre.shiki .line {
  display: block;
  min-height: 1.4em;
  border-radius: 0.25rem;
}
pre.shiki .line--highlighted {
  background-color: hsl(var(--accent) / 0.5);
}
pre.shiki--line-numbers .line::before {
  content: attr(data-line-number);
  display: inline-block;
  width: 2.2rem;
  margin-right: 1rem;
  text-align: right;
  color: hsl(var(--muted-foreground));
  user-select: none;
}
